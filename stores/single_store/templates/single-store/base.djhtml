<!DOCTYPE html>

{% set name_full  = "" %}
{% set name_short = "LV Store" %}
{% set logo  = "" %}
{# {% set currency = 'Rs.' %} #}
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,400i,500,500i,700,700i">

    <!-- css -->
    <!-- <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css"> -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/default-skin/default-skin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css">

    <!-- font - fontawesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    
    <link rel="stylesheet" type="text/css" href= "{{ url_for('static', filename='css/single-store/base.css') }}">
    <link rel="stylesheet" type="text/css" href= "{{ url_for('static', filename='css/general/blocks/product-blocks.css') }}">
    <link rel="stylesheet" type="text/css" href= "{{ url_for('static', filename='css/general/blocks/quick-view-modal-block.css') }}">
    {% block headCSS %}{% endblock %}

    <!-- scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    {% block head %}{% endblock %}

    <title>
        {{pageTitle}} | {{name_short}}
    </title>
</head>

<body class="site">
    <header>
        {% include '/general/header/header.djhtml' %}
    </header>

    <main>
        {% block bodyHead %}
            {% include '/general/blocks/breadcrumb-block.djhtml' %}
        {% endblock %}
        {% block content %}{% endblock %}
    </main>

    <footer>
        {% include '/general/footer/footer.djhtml' %}
        {% include '/general/blocks/goto-top-block.djhtml' %}
    </footer>

    {% include '/general/blocks/quick-view-block.djhtml' %}

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.7.0/nouislider.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
    <script src="{{ url_for('static', filename='js/number.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/header.js') }}" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/svg4everybody/2.1.9/svg4everybody.min.js"></script>
    <script>
        svg4everybody();
    </script>
    <script>
    $(document).ready(function(){
        var cart_product_no = {{cartProductNumber}}
        if(cart_product_no == ""){
            $('#sidebar-cart').show();
            $("#cart-empty-block").show();
        }
        else{
            $(".showCartTable").show();
            $('#sidebar-cart').hide();
            $("#cart-empty-block").hide();
        }
        $(document).on('click', '#deleteCart', function(){
            var cart_deleteIndex = $(this).attr('data-id');
            req = $.ajax({
                    url: "/delete_cart",
                    type: "POST",
                    data: cart_deleteIndex,
                    }); 
            req.done(function(data){
                if(data.cartProductNumber == 0){
                    $(".showCartTable").hide();
                    $("#cart-empty-block").show();
                }
                else{
                    $('#sidebar_cart'+cart_deleteIndex).fadeOut('normal', function(){
                        $('#main_cart'+cart_deleteIndex).fadeOut(1000);
                        $('#main_cart'+cart_deleteIndex).remove();
                        $("#cart-empty-block").hide();
                        $(".showCartTable").show();
                    });
                }
                $('#total_cart').text(data.totalCart);
                    $('#cart_indicator').text(data.cartProductNumber);
                    $('#sidebar_cart'+cart_deleteIndex).remove();
                
            });
        });

        $(document).on('click', '#addCart', function(){
            var selector = $(this);
            var cart_index = $(this).attr('data-id');
            
            req = $.ajax({
                    url: "/add_cart",
                    type: "POST",
                    data: cart_index,
                    }); 
            req.done(function(data){
                if(data.cart_count != 0){
                    $("#cart-empty-block").hide();
                }

                $('#cart_indicator').text(data.cart_count);
                $('.dropcart-products-list').html(data);
                $('.dropcart-products-list').append(data.htmlresponse);
                $('#total_cart').text(data.totalCart);
                $(selector).fadeOut(1000).fadeIn(1000);
                $(selector).css('fill', '#000000');
                
            });
        });

        $(document).on('click', '#addWishlist', function(){
            var selector = $(this);
            var wishlist_index = $(this).attr('data-id');
            $.ajax({
                    url: "/wishlistAdd",
                    type: "POST",
                    data: wishlist_index,
                    success: function(data,statusText, xhr){
                        console.log(xhr.status);
                        console.log(data.wishlist_indicator)
                        $('#wishlist_indicator').text(data.wishlist_indicator);
                        $(selector).fadeOut(1000).fadeIn(1000);
                        $(selector).css('fill', '#000000');
                        
                    }
                }); 

            
        });
     
        $(document).on('click', '#addCompare', function(){
            var selector = $(this);
            var compare_index = $(this).attr('data-id');
            req = $.ajax({
                    url: "/compare_add",
                    type: "POST",
                    data: compare_index,
                    }); 
            req.done(function(data){
                $(selector).fadeOut(1000).fadeIn(1000);
                $(selector).css('fill', '#000000');
            });
            
        });

    });
    </script>
    {% block tail %}{% endblock %}
</body>
</html>
